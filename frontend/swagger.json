{"openapi":"3.0.0","info":{"title":"Document Management System API","version":"1.0.0","description":"API documentation for Document Management System","contact":{"name":"API Support","email":"support@example.com"}},"servers":[{"url":"http://localhost:5000/api","description":"Local Development Server"},{"url":"https://uat-api.example.com/api","description":"UAT Server"},{"url":"https://api.example.com/api","description":"Production Server"}],"x-tagGroups":[{"name":"API Endpoints","tags":["Authentication","Users","Files"]}],"components":{"securitySchemes":{"bearerAuth":{"type":"http","scheme":"bearer","bearerFormat":"JWT"}},"schemas":{"User":{"type":"object","required":["name","email"],"properties":{"id":{"type":"string","description":"User ID"},"name":{"type":"string","description":"User name"},"email":{"type":"string","format":"email","description":"User email"},"role":{"type":"string","enum":["admin","user"],"description":"User role"},"createdAt":{"type":"string","format":"date-time","description":"Timestamp of user creation"},"updatedAt":{"type":"string","format":"date-time","description":"Timestamp of last user update"}}},"FileUpload":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"The file to upload"},"parent":{"type":"string","description":"Parent folder ID (null for root level)","nullable":true}},"required":["file"]},"RegisterUserDto":{"type":"object","required":["name","email","password"],"properties":{"name":{"type":"string","description":"User name"},"email":{"type":"string","format":"email","description":"User email"},"password":{"type":"string","format":"password","description":"User password"},"role":{"type":"string","enum":["admin","user"],"description":"User role (optional)"}}},"LoginUserDto":{"type":"object","required":["email","password"],"properties":{"email":{"type":"string","format":"email","description":"User email"},"password":{"type":"string","format":"password","description":"User password"}}},"UpdateUserDto":{"type":"object","properties":{"name":{"type":"string","description":"User name"},"email":{"type":"string","format":"email","description":"User email"},"password":{"type":"string","format":"password","description":"User password"},"role":{"type":"string","enum":["admin","user"],"description":"User role"}}},"File":{"type":"object","required":["name","owner"],"properties":{"id":{"type":"string","description":"File or folder ID"},"name":{"type":"string","description":"File or folder name"},"type":{"type":"string","description":"File type/MIME type (only for files)"},"size":{"type":"number","description":"File size in bytes (only for files)"},"path":{"type":"string","description":"File storage path (only for files)"},"owner":{"type":"string","description":"Owner user ID"},"parent":{"type":"string","description":"Parent folder ID (null for root items)","nullable":true},"sharedWith":{"type":"array","items":{"type":"string","description":"User IDs"},"description":"Users this file/folder is shared with"},"isFolder":{"type":"boolean","description":"Whether this is a folder or a file"},"createdAt":{"type":"string","format":"date-time","description":"Timestamp of file/folder creation"},"updatedAt":{"type":"string","format":"date-time","description":"Timestamp of last file/folder update"}}},"CreateFolderDto":{"type":"object","required":["name"],"properties":{"name":{"type":"string","description":"Folder name"},"parent":{"type":"string","description":"Parent folder ID (null for root folder)","nullable":true}}},"CreateFileDto":{"type":"object","required":["name","type","size"],"properties":{"name":{"type":"string","description":"File name"},"type":{"type":"string","description":"File type/MIME type"},"size":{"type":"number","description":"File size in bytes"},"parent":{"type":"string","description":"Parent folder ID (null for root level)","nullable":true}}},"UpdateFileDto":{"type":"object","properties":{"name":{"type":"string","description":"File or folder name"},"parent":{"type":"string","description":"Parent folder ID (null for root level)","nullable":true}}},"ShareFileDto":{"type":"object","required":["userIds"],"properties":{"userIds":{"type":"array","items":{"type":"string","description":"User IDs"},"description":"List of user IDs to share with"}}},"PresignedUrl":{"type":"object","properties":{"url":{"type":"string","description":"Pre-signed URL for upload or download"},"expiresAt":{"type":"string","format":"date-time","description":"Expiration timestamp of the URL"}}},"PaginationDto":{"type":"object","properties":{"page":{"type":"integer","minimum":1,"default":1,"description":"Page number"},"limit":{"type":"integer","minimum":1,"default":10,"description":"Number of items per page"}}}}},"tags":[{"name":"Authentication","description":"API for user authentication"},{"name":"Users","description":"API for user management"},{"name":"Files","description":"API for file and folder management"}],"paths":{"/auth/register":{"post":{"summary":"Register a new user","tags":["Authentication"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterUserDto"}}}},"responses":{"201":{"description":"User created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"token":{"type":"string"}}}}}}}},"400":{"description":"Bad request"}}}},"/auth/login":{"post":{"summary":"Login a user","tags":["Authentication"],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/LoginUserDto"}}}},"responses":{"200":{"description":"Login successful","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"user":{"$ref":"#/components/schemas/User"},"token":{"type":"string"}}}}}}}},"401":{"description":"Invalid credentials"}}}},"/auth/me":{"get":{"summary":"Get current logged in user","tags":["Authentication"],"security":[{"bearerAuth":[]}],"responses":{"200":{"description":"Current logged in user","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"$ref":"#/components/schemas/User"}}}}}},"401":{"description":"Not authorized"}}}},"/files/folders":{"post":{"summary":"Create a new folder","tags":["Files"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/CreateFolderDto"}}}},"responses":{"201":{"description":"Folder created successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/File"}}}}}},"400":{"description":"Bad request"},"401":{"description":"Not authorized"}}}},"/files":{"post":{"summary":"Create a new file by uploading file directly","tags":["Files"],"security":[{"bearerAuth":[]}],"requestBody":{"required":true,"content":{"multipart/form-data":{"schema":{"type":"object","properties":{"file":{"type":"string","format":"binary","description":"The file to upload"},"parent":{"type":"string","description":"Parent folder ID (null for root level)"}}}}}},"responses":{"201":{"description":"File uploaded successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"type":"object","properties":{"file":{"$ref":"#/components/schemas/File"}}}}}}}},"400":{"description":"Bad request"},"401":{"description":"Not authorized"}}},"get":{"summary":"Get all files and folders for the current user","tags":["Files"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"search","schema":{"type":"string"},"description":"Search term for file/folder names"},{"in":"query","name":"parent","schema":{"type":"string"},"description":"Parent folder ID (null for root)"},{"in":"query","name":"isFolder","schema":{"type":"boolean"},"description":"Filter by folders or files"},{"in":"query","name":"shared","schema":{"type":"boolean"},"description":"Only show shared files/folders"},{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"Page number for pagination"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"default":10},"description":"Number of items per page"}],"responses":{"200":{"description":"List of files and folders","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"count":{"type":"number"},"pagination":{"type":"object","properties":{"page":{"type":"number"},"limit":{"type":"number"},"totalPages":{"type":"number"},"total":{"type":"number"}}},"data":{"type":"array","items":{"$ref":"#/components/schemas/File"}}}}}}},"401":{"description":"Not authorized"}}}},"/files/{id}":{"get":{"summary":"Get a file or folder by ID","tags":["Files"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The file or folder ID"}],"responses":{"200":{"description":"File or folder details with download URL","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"type":"object","properties":{"file":{"$ref":"#/components/schemas/File"},"downloadUrl":{"$ref":"#/components/schemas/PresignedUrl"}}}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - No access"},"404":{"description":"File or folder not found"}}},"put":{"summary":"Update a file or folder","tags":["Files"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The file or folder ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateFileDto"}}}},"responses":{"200":{"description":"File or folder updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/File"}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - Not the owner"},"404":{"description":"File or folder not found"}}},"delete":{"summary":"Delete a file or folder","tags":["Files"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The file or folder ID"}],"responses":{"200":{"description":"File or folder deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - Not the owner"},"404":{"description":"File or folder not found"}}}},"/files/{id}/share":{"post":{"summary":"Share a file or folder with other users","tags":["Files"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The file or folder ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ShareFileDto"}}}},"responses":{"200":{"description":"File or folder shared successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/File"}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - Not the owner"},"404":{"description":"File, folder, or user not found"}}}},"/files/{id}/share/{userId}":{"delete":{"summary":"Unshare a file or folder with a user","tags":["Files"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The file or folder ID"},{"in":"path","name":"userId","schema":{"type":"string"},"required":true,"description":"The user ID to unshare with"}],"responses":{"200":{"description":"File or folder unshared successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/File"}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - Not the owner"},"404":{"description":"File or folder not found"}}}},"/users":{"get":{"summary":"Get all users","tags":["Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"query","name":"page","schema":{"type":"integer","minimum":1,"default":1},"description":"Page number for pagination"},{"in":"query","name":"limit","schema":{"type":"integer","minimum":1,"default":10},"description":"Number of items per page"}],"responses":{"200":{"description":"List of all users","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"count":{"type":"number"},"pagination":{"type":"object","properties":{"page":{"type":"number"},"limit":{"type":"number"},"totalPages":{"type":"number"},"total":{"type":"number"}}},"data":{"type":"array","items":{"$ref":"#/components/schemas/User"}}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - Not an admin"}}}},"/users/{id}":{"get":{"summary":"Get a user by ID","tags":["Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The user ID"}],"responses":{"200":{"description":"User details","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"data":{"$ref":"#/components/schemas/User"}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - Not an admin"},"404":{"description":"User not found"}}},"put":{"summary":"Update a user","tags":["Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The user ID"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/UpdateUserDto"}}}},"responses":{"200":{"description":"User updated successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"},"data":{"$ref":"#/components/schemas/User"}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - Not an admin"},"404":{"description":"User not found"}}},"delete":{"summary":"Delete a user","tags":["Users"],"security":[{"bearerAuth":[]}],"parameters":[{"in":"path","name":"id","schema":{"type":"string"},"required":true,"description":"The user ID"}],"responses":{"200":{"description":"User deleted successfully","content":{"application/json":{"schema":{"type":"object","properties":{"success":{"type":"boolean"},"message":{"type":"string"}}}}}},"401":{"description":"Not authorized"},"403":{"description":"Forbidden - Not an admin"},"404":{"description":"User not found"}}}}}}